<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <PropertyGroup>
    <OpcUaComplexTypesBuildDebug Condition="'$(OpcUaComplexTypesBuildDebug)' == ''">false</OpcUaComplexTypesBuildDebug>
    
    <OpcUaComplexTypesBuildCore Condition="'$(OpcUaComplexTypesBuildDebug)' == 'false' and '$(MSBuildRuntimeType)' == 'Core'">true</OpcUaComplexTypesBuildCore>
    <OpcUaComplexTypesBuild46 Condition="'$(OpcUaComplexTypesBuildDebug)' == 'false' and '$(MSBuildRuntimeType)' != 'Core' and ('$(TargetFramework)' == 'net46' || '$(TargetFramework)' == 'net461' || '$(TargetFramework)' == 'net462' || '$(TargetFramework)' == 'net47' || '$(TargetFramework)' == 'net471')">true</OpcUaComplexTypesBuild46>
    <OpcUaComplexTypesBuild472 Condition="'$(OpcUaComplexTypesBuildDebug)' == 'false' and '$(MSBuildRuntimeType)' != 'Core' and ('$(TargetFramework)' == 'net472' || '$(TargetFramework)' == 'net48')">true</OpcUaComplexTypesBuild472>
    
    <OpcUaComplexTypesBuildAssembly Condition="'$(OpcUaComplexTypesBuildCore)' == 'true'">$(MSBuildThisFileDirectory)netstandard2.0\$(MSBuildThisFileName).dll</OpcUaComplexTypesBuildAssembly>
    <OpcUaComplexTypesBuildAssembly Condition="'$(OpcUaComplexTypesBuild46)' == 'true'">$(MSBuildThisFileDirectory)net46\$(MSBuildThisFileName).dll</OpcUaComplexTypesBuildAssembly>
    <OpcUaComplexTypesBuildAssembly Condition="'$(OpcUaComplexTypesBuild472)' == 'true'">$(MSBuildThisFileDirectory)net472\$(MSBuildThisFileName).dll</OpcUaComplexTypesBuildAssembly>
    
    <OpcUaComplexTypesBuildAssembly Condition="'$(OpcUaComplexTypesBuildAssembly)' == '' and '$(OpcUaComplexTypesBuildDebug)' == 'true'">$(MSBuildThisFileDirectory)..\$(MSBuildThisFileName).dll</OpcUaComplexTypesBuildAssembly>
  </PropertyGroup>
  <UsingTask Condition="'$(OpcUaComplexTypesBuildAssembly)' != ''" TaskName="OpcUaComplexTypesBuildTask" AssemblyFile="$(OpcUaComplexTypesBuildAssembly)"/>

  <Target Name="OpcUaComplexTypesBuildTask" BeforeTargets="CoreCompile" Condition="'$(OpcUaComplexTypesBuildAssembly)' != ''">
    <Message Text="OpcUaComplexTypesBuildTaskAssembly:'$(OpcUaComplexTypesBuildAssembly)'" Importance="high" />
    <Message Text="OpcUaComplexTypesBuildTaskProjectPath:'$(MSBuildProjectDirectory)'" Importance="high" />
    <Message Text="OpcUaComplexTypesBuildTaskDebug:'$(OpcUaComplexTypesBuildDebug)'" Importance="high" />
    <OpcUaComplexTypesBuildTask ProjectPath="$(MSBuildProjectDirectory)"/>
  </Target>
</Project>
